EESchema Schematic File Version 4
LIBS:pcb-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 5
Title "Kaljajuna-veturi"
Date ""
Rev ""
Comp "Elite Dekkerz"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L modules:ESP-12F IC?
U 1 1 5E8E03B3
P 5300 3700
F 0 "IC?" H 5300 3800 50  0000 C CNN
F 1 "ESP-12F" H 5300 3700 50  0000 C CNN
F 2 "" H 5300 3700 50  0001 C CNN
F 3 "" H 5300 3700 50  0001 C CNN
	1    5300 3700
	1    0    0    -1  
$EndComp
$Comp
L generic:R R?
U 1 1 5E8E0597
P 4600 3300
F 0 "R?" V 4600 3353 50  0000 L CNN
F 1 "10K" V 4700 3400 50  0000 C CNN
F 2 "SMT:0603" H 4500 3275 50  0001 C CNN
F 3 "" H 4600 3300 50  0001 C CNN
	1    4600 3300
	0    1    1    0   
$EndComp
Wire Wire Line
	4800 3500 4600 3500
Wire Wire Line
	4600 3500 4600 3400
Wire Wire Line
	4600 3200 4600 3100
Wire Wire Line
	4600 2800 5300 2800
Wire Wire Line
	5300 2800 5300 2900
Wire Wire Line
	4800 3100 4600 3100
Connection ~ 4600 3100
Wire Wire Line
	4600 3100 4600 2800
$Comp
L generic:GND GND?
U 1 1 5E8E080D
P 5300 4500
F 0 "GND?" H 5450 4550 50  0001 C CNN
F 1 "GND" H 5450 4500 50  0001 C CNN
F 2 "" H 5300 4500 50  0001 C CNN
F 3 "" H 5300 4500 50  0001 C CNN
	1    5300 4500
	1    0    0    -1  
$EndComp
$Comp
L generic:3V3 3V3?
U 1 1 5E8E1283
P 4300 2700
F 0 "3V3?" H 4450 2750 50  0001 C CNN
F 1 "3V3" H 4300 2900 50  0000 C TNN
F 2 "" H 4300 2700 50  0001 C CNN
F 3 "" H 4300 2700 50  0001 C CNN
	1    4300 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	5300 4400 5300 4500
$Comp
L generic:C C?
U 1 1 5E8E15F5
P 4300 3100
F 0 "C?" H 4378 3100 50  0000 L CNN
F 1 "1u" H 4400 3000 50  0000 C CNN
F 2 "SMT:0603" H 4300 3000 50  0001 C CNN
F 3 "" H 4300 3100 50  0001 C CNN
	1    4300 3100
	1    0    0    -1  
$EndComp
$Comp
L generic:GND GND?
U 1 1 5E8E166F
P 4300 3300
F 0 "GND?" H 4450 3350 50  0001 C CNN
F 1 "GND" H 4450 3300 50  0001 C CNN
F 2 "" H 4300 3300 50  0001 C CNN
F 3 "" H 4300 3300 50  0001 C CNN
	1    4300 3300
	1    0    0    -1  
$EndComp
Wire Wire Line
	4300 3300 4300 3200
Wire Wire Line
	4300 2700 4300 2800
Wire Wire Line
	4300 2800 4600 2800
Connection ~ 4300 2800
Wire Wire Line
	4300 2800 4300 3000
Connection ~ 4600 2800
$Sheet
S 7600 3500 1200 800 
U 5E8E1E56
F0 "Motor driver" 79
F1 "motor-driver.sch" 50
F2 "motor_drive+" I L 7600 3800 50 
F3 "motor_drive-" I L 7600 3900 50 
$EndSheet
Text Label 6000 3800 0    50   ~ 0
motor_drive+
Text Label 6000 3900 0    50   ~ 0
motor_drive-
$Sheet
S 7600 4700 1200 800 
U 5E98F463
F0 "Hall-effect sensor" 79
F1 "hall-effect.sch" 50
F2 "hall_effect" O L 7600 5100 50 
F3 "hall_effect_low_threshold" I R 8800 4900 50 
F4 "hall_effect_high_threshold" I R 8800 4800 50 
$EndSheet
Text Label 6000 3600 0    50   ~ 0
SDA
Text Label 6000 3700 0    50   ~ 0
SCL
Text Label 6000 3400 0    50   ~ 0
debug
Wire Wire Line
	5800 3400 6000 3400
NoConn ~ 5800 3300
NoConn ~ 5800 4100
Wire Wire Line
	7600 5100 7100 5100
Wire Wire Line
	7100 5100 7100 4000
Text Label 6000 4000 0    50   ~ 0
hall_effect
$Comp
L DAC:MCP4728 IC?
U 1 1 5EA593A1
P 8100 2500
F 0 "IC?" H 8400 2900 50  0000 C CNN
F 1 "MCP4728" H 8400 2800 50  0000 C CNN
F 2 "" H 8100 2500 50  0001 C CNN
F 3 "" H 8100 2500 50  0001 C CNN
	1    8100 2500
	1    0    0    -1  
$EndComp
$Comp
L generic:GND GND?
U 1 1 5EA5975A
P 8100 3000
F 0 "GND?" H 8250 3050 50  0001 C CNN
F 1 "GND" H 8250 3000 50  0001 C CNN
F 2 "" H 8100 3000 50  0001 C CNN
F 3 "" H 8100 3000 50  0001 C CNN
	1    8100 3000
	1    0    0    -1  
$EndComp
Wire Wire Line
	8100 3000 8100 2900
$Comp
L generic:C C?
U 1 1 5EA59DC2
P 7800 1900
F 0 "C?" H 7878 1946 50  0000 L CNN
F 1 "100n" H 7878 1855 50  0000 L CNN
F 2 "SMT:0603" H 7800 1800 50  0001 C CNN
F 3 "" H 7800 1900 50  0001 C CNN
	1    7800 1900
	1    0    0    -1  
$EndComp
Wire Wire Line
	8100 2200 8100 1700
Wire Wire Line
	8100 1700 7800 1700
Wire Wire Line
	7800 1700 7800 1800
$Comp
L generic:GND GND?
U 1 1 5EA5A166
P 7800 2100
F 0 "GND?" H 7950 2150 50  0001 C CNN
F 1 "GND" H 7950 2100 50  0001 C CNN
F 2 "" H 7800 2100 50  0001 C CNN
F 3 "" H 7800 2100 50  0001 C CNN
	1    7800 2100
	1    0    0    -1  
$EndComp
Wire Wire Line
	7800 2100 7800 2000
$Comp
L generic:3V3 3V?
U 1 1 5EA5AF28
P 7800 1600
F 0 "3V?" H 7950 1650 50  0001 C CNN
F 1 "3V3" H 7800 1800 50  0000 C TNN
F 2 "" H 7800 1600 50  0001 C CNN
F 3 "" H 7800 1600 50  0001 C CNN
	1    7800 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	7800 1600 7800 1700
Connection ~ 7800 1700
Wire Wire Line
	7700 2600 7600 2600
Wire Wire Line
	7600 2600 7600 3000
$Comp
L generic:GND GND?
U 1 1 5EA5B765
P 7600 3000
F 0 "GND?" H 7750 3050 50  0001 C CNN
F 1 "GND" H 7750 3000 50  0001 C CNN
F 2 "" H 7600 3000 50  0001 C CNN
F 3 "" H 7600 3000 50  0001 C CNN
	1    7600 3000
	1    0    0    -1  
$EndComp
Wire Wire Line
	7400 3700 7400 2500
Wire Wire Line
	7400 2500 7700 2500
Wire Wire Line
	7300 3600 7300 2400
Wire Wire Line
	7300 2400 7700 2400
Wire Wire Line
	8500 2400 9500 2400
Wire Wire Line
	9500 2400 9500 4900
Wire Wire Line
	9500 4900 8800 4900
Wire Wire Line
	8500 2500 9300 2500
Wire Wire Line
	9300 2500 9300 4800
Wire Wire Line
	9300 4800 8800 4800
Text Label 9300 3900 1    50   ~ 0
hall_effect_high_threshold
Text Label 9500 3900 1    50   ~ 0
hall_effect_low_threshold
$Sheet
S 4800 4700 1200 800 
U 5EA743CE
F0 "Battery management system" 79
F1 "bms.sch" 50
F2 "5V_charge" I L 4800 4900 50 
$EndSheet
$Comp
L generic:R R?
U 1 1 5EAF6347
P 6900 2800
F 0 "R?" V 6900 2853 50  0000 L CNN
F 1 "33k" V 7000 2900 50  0000 C CNN
F 2 "SMT:0603" H 6800 2775 50  0001 C CNN
F 3 "" H 6900 2800 50  0001 C CNN
	1    6900 2800
	0    1    1    0   
$EndComp
$Comp
L generic:R R?
U 1 1 5EAF6391
P 6900 3200
F 0 "R?" V 6900 3253 50  0000 L CNN
F 1 "10k" V 7000 3300 50  0000 C CNN
F 2 "SMT:0603" H 6800 3175 50  0001 C CNN
F 3 "" H 6900 3200 50  0001 C CNN
	1    6900 3200
	0    1    1    0   
$EndComp
$Comp
L generic:GND GND?
U 1 1 5EAF72EA
P 6900 3400
F 0 "GND?" H 7050 3450 50  0001 C CNN
F 1 "GND" H 7050 3400 50  0001 C CNN
F 2 "" H 6900 3400 50  0001 C CNN
F 3 "" H 6900 3400 50  0001 C CNN
	1    6900 3400
	1    0    0    -1  
$EndComp
Text GLabel 6900 2600 1    50   Input ~ 0
V_battery
Wire Wire Line
	6900 2600 6900 2700
Wire Wire Line
	6900 2900 6900 3000
$Comp
L generic:C C?
U 1 1 5EAF8E80
P 6600 3200
F 0 "C?" H 6678 3200 50  0000 L CNN
F 1 "C" H 6700 3100 50  0001 C CNN
F 2 "SMT:0603" H 6600 3100 50  0001 C CNN
F 3 "" H 6600 3200 50  0001 C CNN
	1    6600 3200
	1    0    0    -1  
$EndComp
$Comp
L generic:GND GND?
U 1 1 5EAF8EB4
P 6600 3400
F 0 "GND?" H 6750 3450 50  0001 C CNN
F 1 "GND" H 6750 3400 50  0001 C CNN
F 2 "" H 6600 3400 50  0001 C CNN
F 3 "" H 6600 3400 50  0001 C CNN
	1    6600 3400
	1    0    0    -1  
$EndComp
Wire Wire Line
	6600 3100 6600 3000
Wire Wire Line
	6600 3000 6900 3000
Connection ~ 6600 3000
Connection ~ 6900 3000
Wire Wire Line
	6900 3000 6900 3100
Wire Wire Line
	5800 3600 7300 3600
Wire Wire Line
	5800 3700 7400 3700
Wire Wire Line
	5800 3800 7600 3800
Wire Wire Line
	5800 3900 7600 3900
Wire Wire Line
	5800 4000 7100 4000
Wire Wire Line
	6900 3300 6900 3400
Wire Wire Line
	6600 3300 6600 3400
Wire Wire Line
	6400 3100 6400 3000
Wire Wire Line
	6400 3000 6600 3000
Wire Wire Line
	5800 3100 6400 3100
$Sheet
S 1900 3200 1500 1400
U 5EB7AE5E
F0 "USB" 50
F1 "USB.sch" 50
F2 "RX" O R 3400 4100 50 
F3 "TX" I R 3400 3900 50 
F4 "5V_USB" O R 3400 4400 50 
F5 "DTR" O R 3400 3500 50 
$EndSheet
Wire Wire Line
	3400 3900 4800 3900
Wire Wire Line
	3400 4100 4800 4100
Wire Wire Line
	3400 4400 4100 4400
Wire Wire Line
	4100 4400 4100 4900
Wire Wire Line
	4100 4900 4800 4900
$Comp
L generic:C C?
U 1 1 5EB843DA
P 3900 3500
F 0 "C?" V 3685 3500 50  0000 C CNN
F 1 "100n" V 3776 3500 50  0000 C CNN
F 2 "SMT:0603" H 3900 3400 50  0001 C CNN
F 3 "" H 3900 3500 50  0001 C CNN
	1    3900 3500
	0    1    1    0   
$EndComp
Wire Wire Line
	3400 3500 3800 3500
Wire Wire Line
	4000 3500 4600 3500
Connection ~ 4600 3500
$EndSCHEMATC
